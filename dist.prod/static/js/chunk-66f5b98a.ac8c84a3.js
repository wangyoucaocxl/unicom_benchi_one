(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66f5b98a"],{"2fdb":function(e,t,a){"use strict";var n=a("5ca1"),i=a("d2c8"),o="includes";n(n.P+n.F*a("5147")(o),"String",{includes:function(e){return!!~i(this,e,o).indexOf(e,arguments.length>1?arguments[1]:void 0)}})},5147:function(e,t,a){var n=a("2b4c")("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[n]=!1,!"/./"[e](t)}catch(i){}}return!0}},6762:function(e,t,a){"use strict";var n=a("5ca1"),i=a("c366")(!0);n(n.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},"6a3b":function(e,t,a){"use strict";var n=a("8631"),i=a.n(n);i.a},8631:function(e,t,a){},d2c8:function(e,t,a){var n=a("aae3"),i=a("be13");e.exports=function(e,t,a){if(n(t))throw TypeError("String#"+a+" doesn't accept regex!");return String(i(e))}},f503:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section workers"},[a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{inline:!0,model:e.filters,size:"small"}},[a("el-form-item",{attrs:{label:"摄像头ID："}},[a("el-select",{staticClass:"search-item",attrs:{placeholder:"请选择"},model:{value:e.filters.camera,callback:function(t){e.$set(e.filters,"camera",t)},expression:"filters.camera"}},e._l(e.camera,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"是否通过："}},[a("el-select",{staticClass:"search-item",attrs:{placeholder:"请选择"},model:{value:e.filters.status,callback:function(t){e.$set(e.filters,"status",t)},expression:"filters.status"}},e._l(e.status,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.pager.page=1,e.getMainTableData()}}},[e._v("查询")]),a("el-button",{on:{click:function(t){return e.resetForm("searchForm")}}},[e._v("刷新")]),a("el-button",{on:{click:e.exportImg}},[e._v("图片导出")]),a("el-button",{attrs:{type:"danger"},on:{click:e.deleteData}},[e._v("删除")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"recordtb",staticStyle:{width:"100%"},attrs:{"row-key":"_id",data:e.tableData,border:""},on:{"selection-change":function(t){e.selectObjs=t}}},[a("el-table-column",{attrs:{type:"selection",width:"55","reserve-selection":!0}}),a("el-table-column",{attrs:{prop:"timestamp",label:"检测时间","min-width":"160",formatter:e.formatTimestamp}}),a("el-table-column",{attrs:{prop:"Camer_ID",label:"摄像头ID","min-width":"120"}}),a("el-table-column",{attrs:{prop:"Worker_ID",label:"员工工号","min-width":"120"}}),a("el-table-column",{attrs:{prop:"hat",label:"帽子","min-width":"120",formatter:e.formatStatus},scopedSlots:e._u([{key:"default",fn:function(e){return[a("span",{class:"iconfont "+(1==e.row.hat?"iconduigou icon-dui":"iconchacha icon-cuo")})]}}])}),a("el-table-column",{attrs:{prop:"frock",label:"衣服","min-width":"120",formatter:e.formatStatus},scopedSlots:e._u([{key:"default",fn:function(e){return[a("span",{class:"iconfont "+(1==e.row.frock?"iconduigou icon-dui":"iconchacha icon-cuo")})]}}])}),a("el-table-column",{attrs:{prop:"glove",label:"手套","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("span",{class:"iconfont "+(1==e.row.glove?"iconduigou icon-dui":"iconchacha icon-cuo")})]}}])}),a("el-table-column",{attrs:{prop:"shoe",label:"鞋子","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("span",{class:"iconfont "+(1==e.row.shoe?"iconduigou icon-dui":"iconchacha icon-cuo")})]}}])}),a("el-table-column",{attrs:{prop:"pass",label:"是否通过","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:"color:"+(1==t.row.pass?"#34ae63":"#f94b4b")},[e._v(e._s(1==t.row.pass?"YES":"NO"))])]}}])}),a("el-table-column",{attrs:{prop:"checkPic",label:"操作","min-width":"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.showImage(t.row.IMAGE_ID)}}},[e._v("查看")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return e.deleteRecord(t.row._id)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination-div"},[a("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total, sizes,prev, pager, next, jumper",background:"","current-page":e.pager.page,"page-size":e.pager.pageSize,"page-sizes":[20,30,50],total:e.pager.total},on:{"size-change":e.pageSizeChange,"current-change":e.pageCurrentChange}})],1),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:e.dialogPicVisible},on:{"update:visible":function(t){e.dialogPicVisible=t}}},[a("img",{staticStyle:{"max-width":"100%","max-height":"400px"},attrs:{src:e.imgUrl}})])],1)},i=[],o=(a("ac6a"),a("a481"),a("6762"),a("2fdb"),{bind:function(e,t,a){var n=e.querySelector(".el-dialog__header"),i=e.querySelector(".el-dialog");n.style.cssText+=";cursor:move;",i.style.cssText+=";top:0px;",i.style.cssText+=";margin-bottom:0px;";var o=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();n.onmousedown=function(e){var t=e.clientX-n.offsetLeft,r=e.clientY-n.offsetTop,l=i.offsetWidth,s=i.offsetHeight,c=document.body.clientWidth,u=document.documentElement.clientHeight,d=i.offsetLeft,g=c-i.offsetLeft-l,m=i.offsetTop,f=u-i.offsetTop-s-1,p=o(i,"left"),h=o(i,"top");p.includes("%")?(p=+document.body.clientWidth*(+p.replace(/\%/g,"")/100),h=+document.body.clientHeight*(+h.replace(/\%/g,"")/100)):(p=+p.replace(/\px/g,""),h=+h.replace(/\px/g,"")),document.onmousemove=function(e){var n=e.clientX-t,o=e.clientY-r;-n>d?n=-d:n>g&&(n=g),-o>m?o=-m:o>f&&(o=f),i.style.cssText+=";left:".concat(n+p,"px;top:").concat(o+h,"px;"),a.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}}),r=function(e){e.directive("el-drag-dialog",o)};window.Vue&&(window["el-drag-dialog"]=o,Vue.use(r)),o.install=r;var l=o,s=a("4634"),c=a("8b55"),u={directives:{elDragDialog:l},data:function(){return{camera:[{value:"",label:"全部"},{value:"001",label:"001"},{value:"002",label:"002"},{value:"003",label:"003"},{value:"004",label:"004"}],status:[{value:"",label:"全部"},{value:"1",label:"是"},{value:"0",label:"否"}],filters:{camera:"",status:""},tableData:[],pager:{page:1,pageSize:20,total:0},listLoading:!1,addLoading:!1,dialogPicVisible:!1,imgUrl:"",selectObjs:[],globalimgUrl:"http://img.aidong-ai.com/"}},methods:{formatTimestamp:function(e){return e.timestamp?c["a"].formatDate.format(new Date(e.timestamp),"yyyy-MM-dd hh:mm:ss"):"未知"},resetForm:function(){this.filters={camera:"",status:""},this.pager={page:1,pageSize:20,total:0},this.getMainTableData()},formatStatus:function(e,t,a,n){return 1==a?"通过":"未通过"},pageCurrentChange:function(e){this.pager.page=e,this.getMainTableData()},pageSizeChange:function(e){this.pager.pageSize=e,this.getMainTableData()},getMainTableData:function(){var e=this,t=this.$parent.$parent.$parent.dateValue,a={startTime:new Date(new Date(t[0]).toLocaleDateString()).getTime(),endTime:new Date(new Date(t[1]).toLocaleDateString()).getTime()+864e5-1,page:this.pager.page,pageSize:this.pager.pageSize,Camer_ID:this.filters.camera,pass:this.filters.status};this.listLoading=!0,Object(s["b"])("snapshot/worker",a).then(function(t){e.pager.total=t.data.count;var a=t.data.list;a.forEach(function(e){e.Worker_ID=null==e.Worker_ID||""==e.Worker_ID?"无":e.Worker_ID}),e.tableData=a,e.listLoading=!1})},showImage:function(e){this.imgUrl="".concat(this.globalimgUrl,"/").concat(e),this.dialogPicVisible=!0},deleteRecord:function(e){var t=this;this.$confirm("删除后不可恢复","提示",{confirmButtonText:"确认删除",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s["a"])("snapshot/worker",{id:[e]}).then(function(e){1==e.ret?(t.$message({type:"success",message:t.$t("tips.deleteCB")}),t.getMainTableData()):t.$message.error(e.msg)})})},downloadIamge:function(e,t){var a=new Image;a.setAttribute("crossOrigin","anonymous"),a.onload=function(){var n=document.createElement("canvas");n.width=a.width,n.height=a.height;var i=n.getContext("2d");i.drawImage(a,0,0,a.width,a.height);var o=n.toDataURL("image/png"),r=document.createElement("a"),l=new MouseEvent("click");r.download="".concat(t,"__").concat(e),r.href=o,r.dispatchEvent(l)},a.src="".concat(this.globalimgUrl,"/").concat(e)},exportImg:function(){var e=this;this.selectObjs.length<1?this.$message.warning("请选择要导出的项"):this.selectObjs.forEach(function(t){e.downloadIamge(t.IMAGE_ID,t.Camer_ID)})},deleteData:function(){var e=this;this.selectObjs.length<1?this.$message.warning("请选择要删除的项"):this.$confirm("删除后不可恢复","提示",{confirmButtonText:"确认删除",cancelButtonText:"取消",type:"warning"}).then(function(){var t=e.selectObjs.map(function(e){return e._id});Object(s["a"])("snapshot/worker",{id:t}).then(function(t){1==t.ret?(e.$message({type:"success",message:e.$t("tips.deleteCB")}),e.getMainTableData()):e.$message.error(t.msg)})})}},mounted:function(){this.getMainTableData()}},d=u,g=(a("6a3b"),a("2877")),m=Object(g["a"])(d,n,i,!1,null,"f3f993ba",null);t["default"]=m.exports}}]);